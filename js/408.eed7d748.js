"use strict";(self["webpackChunkvue_25degrees"]=self["webpackChunkvue_25degrees"]||[]).push([[408],{3089:function(t,e,i){i.r(e),i.d(e,{default:function(){return u}});var l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"article"},[e("div",{staticClass:"header"},[e("h1",[t._v("專欄文章管理")]),e("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("新增文章")])],1),e("el-scrollbar",[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.articleList,border:""}},[e("el-table-column",{attrs:{prop:"id",label:"id",width:"130",align:"center"}}),e("el-table-column",{attrs:{prop:"title",label:"標題",width:"150",align:"center"}}),e("el-table-column",{attrs:{prop:"thumb",label:"縮圖",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("img",{attrs:{src:t.row.url,alt:"",width:"100px",height:"100px"}})]}}])}),e("el-table-column",{attrs:{label:"內容",width:"500"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"overflow-hidden",domProps:{innerHTML:t._s(i.row.content)}})]}}])}),e("el-table-column",{staticClass:"btns",attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleCheck(i.row.id)}}},[t._v("查看")]),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleEdit(i.row.id)}}},[t._v("編輯")]),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.handleDelete(i.row.id)}}},[t._v("刪除")])]}}])})],1),e("el-dialog",{attrs:{title:t.articleInfo.title,visible:t.dialogVisible,width:"70%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-row",[e("el-col",{attrs:{span:8}},[e("div",{staticClass:"image"},[e("img",{attrs:{src:t.articleInfo.url,alt:"",width:"300px",height:"auto"}})])]),e("el-col",{attrs:{span:16}},[e("h3",[t._v("內文")]),e("div",{domProps:{innerHTML:t._s(t.articleInfo.content)}})]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("確 定")])],1)],1)],1),e("el-dialog",{attrs:{title:"編輯文章",visible:t.editDialogVisible,width:"70%"},on:{"update:visible":function(e){t.editDialogVisible=e}}},[e("el-form",{ref:"editForm",attrs:{"label-position":"right","label-width":"80px",model:t.editForm,rules:t.rules,"before-close":t.handleClose}},[e("el-form-item",{attrs:{label:"標題",prop:"title"}},[e("el-input",{model:{value:t.editForm.title,callback:function(e){t.$set(t.editForm,"title",e)},expression:"editForm.title"}})],1),e("el-form-item",{attrs:{label:"內容",prop:"content"}},[e("quill-editor",{model:{value:t.editForm.content,callback:function(e){t.$set(t.editForm,"content",e)},expression:"editForm.content"}})],1),e("el-form-item",{attrs:{label:"圖片連結",prop:"url"}},[e("el-input",{model:{value:t.editForm.url,callback:function(e){t.$set(t.editForm,"url",e)},expression:"editForm.url"}})],1),e("el-form-item",{attrs:{label:"圖片預覽",prop:"url"}},[e("div",{staticClass:"image"},[e("img",{attrs:{src:t.editForm.url,alt:"",width:"300px",height:"auto"}})])])],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updateArticle(t.editForm.id)}}},[t._v("確 定")])],1)],1),e("el-dialog",{attrs:{title:"新增文章",visible:t.addDialogVisible,width:"70%"},on:{"update:visible":function(e){t.addDialogVisible=e}}},[e("el-form",{ref:"addForm",attrs:{"label-position":"right","label-width":"80px",model:t.addForm,rules:t.rules,"before-close":t.handleClose}},[e("el-form-item",{attrs:{label:"標題",prop:"title"}},[e("el-input",{model:{value:t.addForm.title,callback:function(e){t.$set(t.addForm,"title",e)},expression:"addForm.title"}})],1),e("el-form-item",{attrs:{label:"內容",prop:"content"}},[e("quill-editor",{model:{value:t.addForm.content,callback:function(e){t.$set(t.addForm,"content",e)},expression:"addForm.content"}})],1),e("el-form-item",{attrs:{label:"圖片連結",prop:"url"}},[e("el-input",{model:{value:t.addForm.url,callback:function(e){t.$set(t.addForm,"url",e)},expression:"addForm.url"}})],1),e("el-form-item",{attrs:{label:"圖片預覽",prop:"url"}},[e("div",{staticClass:"image"},[e("img",{attrs:{src:t.addForm.url,alt:"",width:"100px",height:"auto"}})])])],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.addNewArticle}},[t._v("確 定")])],1)],1)],1)],1)},a=[],r=i(7028),o=i(6547),s={name:"articleAdmin",data(){return{articleList:[],dialogVisible:!1,addDialogVisible:!1,editDialogVisible:!1,articleInfo:{},addForm:{title:"",url:"",content:"",id:""},editForm:{title:"",url:"",content:""},rules:{title:[{required:!0,message:"必填",trigger:"blur"}],content:[{required:!0,message:"必填",trigger:"blur"}],url:[{required:!0,message:"必填",trigger:"blur"}]}}},components:{quillEditor:o.quillEditor},async created(){const t=await(0,r.g3)();this.articleList=t.sort(((t,e)=>parseInt(e.id)-parseInt(t.id)))},methods:{async updateArticle(t){this.$refs.editForm.validate((async e=>{if(!e)return this.$message.error("欄位不可為空"),!1;{await(0,r.Tn)(t,this.editForm),this.editDialogVisible=!1,this.$refs.editForm.resetFields();const e=await(0,r.g3)();this.articleList=e.sort(((t,e)=>parseInt(e.id)-parseInt(t.id))),this.$message.success("編輯成功")}}))},addNewArticle(){this.$refs.addForm.validate((async t=>{if(!t)return this.$message.error("欄位不可為空"),!1;{const t=(new Date).getTime().toString;this.addForm.id=t,await(0,r._3)(this.addForm),this.addDialogVisible=!1,this.$refs.addForm.resetFields();const e=await(0,r.g3)();this.articleList=e.sort(((t,e)=>parseInt(e.id)-parseInt(t.id))),this.$message.success("新增成功")}}))},async handleCheck(t){this.dialogVisible=!0;const e=await(0,r.X3)(t);this.articleInfo=e},async handleEdit(t){this.editDialogVisible=!0;const e=await(0,r.X3)(t);this.editForm=e},handleClose(){this.$confirm("還沒完成編輯，確定要關閉嗎？",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.addDialogVisible=!1,this.editDialogVisible=!1})).catch((()=>!1))},async handleDelete(t){const e=await this.$confirm("刪除後不可回復，確定刪除文章嗎？",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).catch((()=>!1));if("confirm"===e){await(0,r.deleteUserAPI)(t),this.$message.success("文章已刪除");const e=await(0,r.g3)();this.articleList=e}}}},n=s,d=i(1001),c=(0,d.Z)(n,l,a,!1,null,null,null),u=c.exports}}]);
//# sourceMappingURL=408.eed7d748.js.map