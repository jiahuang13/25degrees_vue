"use strict";(self["webpackChunkvue_25degrees"]=self["webpackChunkvue_25degrees"]||[]).push([[232],{2232:function(e,t,i){i.r(t),i.d(t,{default:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"user"},[t("div",{staticClass:"header"},[t("h1",[e._v("會員管理")]),t("el-button",{attrs:{icon:"el-icon-plus"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("新增會員")])],1),t("el-scrollbar",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userList,border:""}},[t("el-table-column",{attrs:{prop:"id",label:"id",width:"130",align:"center"}}),t("el-table-column",{attrs:{prop:"username",label:"帳號",align:"center"}}),t("el-table-column",{attrs:{prop:"password",label:"密碼",align:"center"}}),t("el-table-column",{attrs:{prop:"email",label:"電子信箱",align:"center"}}),t("el-table-column",{staticClass:"btns",attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleEdit(i.row.id)}}},[e._v("編輯")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleDelete(i.row.id)}}},[e._v("刪除")])]}}])})],1),t("el-dialog",{attrs:{title:"編輯會員",visible:e.editDialogVisible,width:"70%"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[t("el-form",{ref:"editForm",attrs:{"label-position":"right","label-width":"80px",model:e.editForm,rules:e.rules,"before-close":e.handleClose}},[t("el-form-item",{attrs:{label:"帳號",prop:"username"}},[t("el-input",{model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1),t("el-form-item",{attrs:{label:"密碼",prop:"password"}},[t("el-input",{model:{value:e.editForm.password,callback:function(t){e.$set(e.editForm,"password",t)},expression:"editForm.password"}})],1),t("el-form-item",{attrs:{label:"電子信箱",prop:"email"}},[t("el-input",{model:{value:e.editForm.email,callback:function(t){e.$set(e.editForm,"email",t)},expression:"editForm.email"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateUser(e.editForm.id)}}},[e._v("確 定")])],1)],1),t("el-dialog",{attrs:{title:"新增會員",visible:e.addDialogVisible,width:"70%"},on:{"update:visible":function(t){e.addDialogVisible=t}}},[t("el-form",{ref:"addForm",attrs:{"label-position":"right","label-width":"80px",model:e.addForm,rules:e.rules,"before-close":e.handleClose}},[t("el-form-item",{attrs:{label:"帳號",prop:"username"}},[t("el-input",{model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,"username",t)},expression:"addForm.username"}})],1),t("el-form-item",{attrs:{label:"密碼",prop:"password"}},[t("el-input",{model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1),t("el-form-item",{attrs:{label:"電子信箱",prop:"email"}},[t("el-input",{model:{value:e.addForm.email,callback:function(t){e.$set(e.addForm,"email",t)},expression:"addForm.email"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addNewArticle}},[e._v("確 定")])],1)],1)],1)],1)},a=[],l=i(9362),r={name:"userAdmin",data(){return{userList:[],addDialogVisible:!1,editDialogVisible:!1,userInfo:{},addForm:{username:"",password:"",email:"",id:""},editForm:{username:"",password:"",email:""},rules:{username:[{required:!0,message:"必填",trigger:"blur"}],password:[{required:!0,message:"必填",trigger:"blur"}]}}},async created(){const e=await(0,l.xt)();this.userList=e.sort(((e,t)=>parseInt(t.id)-parseInt(e.id)))},methods:{async updateUser(e){this.$refs.editForm.validate((async t=>{if(!t)return this.$message.error("欄位不可為空"),!1;{await(0,l.pp)(e,this.editForm),this.editDialogVisible=!1,this.$refs.editForm.resetFields();const t=await(0,l.xt)();this.userList=t.sort(((e,t)=>parseInt(t.id)-parseInt(e.id))),this.$message.success("編輯成功")}}))},addNewArticle(){this.$refs.addForm.validate((async e=>{if(!e)return this.$message.error("欄位不可為空"),!1;{const e=(new Date).getTime().toString;this.addForm.id=e,await(0,l.QV)(this.addForm),this.addDialogVisible=!1,this.$refs.addForm.resetFields();const t=await(0,l.xt)();this.userList=t.sort(((e,t)=>parseInt(t.id)-parseInt(e.id))),this.$message.success("新增成功")}}))},async handleEdit(e){this.editDialogVisible=!0;const t=await(0,l.Le)(e);this.editForm=t},handleClose(){this.$confirm("還沒完成編輯，確定要關閉嗎？",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.addDialogVisible=!1,this.editDialogVisible=!1})).catch((()=>!1))},async handleDelete(e){const t=await this.$confirm("刪除後不可回復，確定刪除會員嗎？",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).catch((()=>!1));if("confirm"===t){await(0,l.kX)(e),this.$message.success("會員已刪除");const t=await(0,l.xt)();this.userList=t}}}},o=r,n=i(1001),d=(0,n.Z)(o,s,a,!1,null,null,null),c=d.exports}}]);
//# sourceMappingURL=232.b6e3606f.js.map